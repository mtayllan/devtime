<div class="container">
  <div>
    <%= form_with url: home_index_path, method: :get do |f| %>
      <%=
        f.select :range,
          options_for_select(
            ApplicationHelper::TIME_RANGES.keys.map { |k, _| [k.titleize, k]},
            session[:default_range]
          ),
          {},
          { onchange: "this.form.submit()", class: "select select-primary" }
      %>
    <% end %>
  </div>
  <div
    class="flex flex-col lg:flex-row mt-10"
    data-controller="echarts"
    data-echarts-daily-value=<%= @range_summaries.to_json %>
    data-echarts-range-value="<%= session[:default_range].titleize.downcase %>"
    data-echarts-today-total-value="<%= @today_summary.total_time %>"
    data-echarts-yesterday-total-value="<%= @yesterday_summary.total_time %>"
    data-echarts-period-total-value="<%= @range_summaries.transpose[1].sum(0.0) / @range_summaries.size %>"
  >
    <div id="dailyTimeChart" class="w-full lg:basis-1/2 h-96"></div>
    <div id="totalsChart" class="w-full lg:basis-1/2 h-96"></div>
  </div>
</div>
